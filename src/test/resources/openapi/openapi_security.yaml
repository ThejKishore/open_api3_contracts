#https://editor.swagger.io/
openapi: "3.0.0"
info:
  description: Spring Cloud Contract Verifier Http Server OA3 Sample
  version: "1.0.0"
  title: Address Microservice api
paths:
  /token:
    post:
      summary: Returns a list of token.
      description: Optional extended description in Markdown.
      x-contracts:
        - contractId: 8
          name: get access token for posted form data
          priority: 1
          method: post
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                grant_type:
                  type: string
                  description: grant type would be one of these values ,
                username:
                  type: string
                password:
                  type: string
                refresh_token:
                  type: string
                code:
                  type: string
                captchaToken:
                  type: string
                store_id:
                  type: string
                terminal_id:
                  type: string
                associate_id:
                  type: string
                security_level:
                  type: string
        x-contracts:
          - contractId: 8
            body:
              "grant_type": "client_credentials"
              "username": "user"
              "password": "password"
            matchers:
              body:
                - path: $.['grant_type']
                  type: by_regex
                  in: body
                  predefined: non_empty
                - path: $.['username']
                  in: body
                  type: by_regex
                  predefined: non_empty
                - path: $.['password']
                  in: body
                  type: by_regex
                  predefined: non_empty
              paramaters:
                - name: Authorization
                  in: header
                  type: by_regex
                  predefined: non_empty
            paramaters:
              - name: Authorization
                in: header
                type: by_type
                value: "Basic csc_user:jcpenney2017"
      parameters:
        - name: Authorization
          in: header
          description: authorization with base userid credentials
          required: false
          schema:
            type: string
            default: "something.somethign"
        - name: X-CLIENT-MODE
          in: header
          description: authorization jwt token
          required: false
          schema:
            type: string
            default: "something.somethign"
        - name: X-GUEST-ACCOUNT-ID
          in: header
          description: authorization jwt token
          required: false
          schema:
            type: string
            default: "something.somethign"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                  token_type:
                    type: string
                  expires_in:
                    type: integer
                  refresh_token:
                    type: string
                  account_id:
                    type: string
                  account_href:
                    type: string
          x-contracts:
            - contractId: 8
              status: 200
              body:
                access_token: "access_token"
                token_type: "token_type"
                expires_in: 10000
                refresh_token: "refresh_token"
                account_id: "account_id"
                account_href: "account_href"
              headers:
                Content-Type: application/json;charset=UTF-8
              matchers:
                body:
                  - path: $.['access_token']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['token_type']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['expires_in']
                    type: by_regex
                    in: body
                    predefined: number
                  - path: $.['refresh_token']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['account_id']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['account_href']
                    type: by_regex
                    in: body
                    predefined: non_empty

  /samlToken:
    post:
      summary: Returns a list of token.
      description: Optional extended description in Markdown.
      x-contracts:
        - contractId: 9
          name: get access token for posted saml form data
          priority: 1
          method: post
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              properties:
                grant_type:
                  type: string
                  description: grant type would be one of these values ,
                assertion:
                  type: string
        x-contracts:
          - contractId: 9
            body:
              "grant_type": "client_credentials"
              "username": "user"
              "password": "password"
            matchers:
              body:
                - path: $.['grant_type']
                  type: by_regex
                  in: body
                  predefined: non_empty
                - path: $.['username']
                  type: by_regex
                  in: body
                  predefined: non_empty
                - path: $.['password']
                  type: by_regex
                  in: body
                  predefined: non_empty
              header:
                - path: Authorization
                  type: byregex
                  predefined: non_empty
                  value: 'Basic csc_user:password'
      parameters:
        - name: Authorization
          in: header
          description: authorization with base userid credentials
          required: false
          schema:
            type: string
            default: "something.somethign"
          x-contracts:
            - contractId: 8
              matchers:
                body:
                  - path: $.['refresh_token']
                    type: by_regex
                    predefined: non_empty
                    in: body
        - name: X-CLIENT-MODE
          in: header
          description: authorization jwt token
          required: false
          schema:
            type: string
            default: "something.somethign"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                  token_type:
                    type: string
                  expires_in:
                    type: integer
                  refresh_token:
                    type: string
                  account_id:
                    type: string
                  account_href:
                    type: string
          x-contracts:
            - contractId: 9
              status: 200
              body:
                access_token: "sdsdsd"
                token_type: "client_credentials"
                expires_in: 18000
                refresh_token: "sdsdsd"
                account_id: "account1"
                account_href: "asdsdsds"
              headers:
                Content-Type: application/json;charset=UTF-8
              matchers:
                body:
                  - path: $.['access_token']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['token_type']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['expires_in']
                    type: by_regex
                    in: body
                    predefined: number
                  - path: $.['refresh_token']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['account_id']
                    type: by_regex
                    in: body
                    predefined: non_empty
                  - path: $.['account_href']
                    type: by_regex
                    in: body
                    predefined: non_empty
                header:
                  - name: content-type
                    type: by_regex
                    in: header
                    predefined: non_empty